<div class="section" id="facerecognition">

{{#if clustersByName}}
	<h2 style="display: flex;">
		<a class="title-icon icon-back"></a>
		<span class="title-name">{{personName}}</span>
	</h2>
	<div id="persons-navigation">
		{{#each clustersByName}}
			<h2 class="cluster-title" style="display: flex;">
				<span class="title-name">{{this.name}}</span>
				<a id="rename-cluster" title="{{renameHint}}" class="title-icon icon-rename" data-id="{{this.id}}"></a>
				<a id="hide-cluster" title="{{hideHint}}" class="title-icon icon-disabled-user" data-id="{{this.id}}"></a>
			</h2>
			<div class="faces-previews">
				{{#each this.faces}}
					<a target="_blank" href="{{fileUrl}}">
						<div class="face-preview lozad" data-background-image="{{thumbUrl}}" width="50" height="50"></div>
					</a>
				{{/each}}
			</div>
		{{/each}}
	</div>
{{else if bulkAction}}
	<!-- Wrapper – flex container + relative positioning -->
	<div class="layout-wrapper"
		style="
			display:flex;
			gap:0;          /* no space between panes divider will be the separator */
			position:relative;
			overflow: auto;
		">
	
		<!-- ================== CLOSE BUTTON (top‑right) ================== -->
		<button id="close-bulk-widget"
				title="Close"
				type="button"
				class="primary"
				style="
					position:absolute;
					top:8px;
					right:8px;
					width:28px; height:28px;
					border:none;
					font-size:18px; line-height:1;
					cursor:pointer;
					border-radius:4px;
					box-shadow:0 2px 6px;
				">
			&times;
		</button>

		<!-- ================== LEFT SIDE (original content) ================== -->
		<div class="left-pane"
			style="
				flex:1;
				overflow-y:auto;            /* scroll if needed */
			">
			<h2>
				{{appName}}
			</h2>
			<input id="enableFacerecognition" name="enableFacerecognition" type="checkbox" class="checkbox" value="1" {{#if enabled}}checked{{/if}}>
			<label for="enableFacerecognition">{{enableDescription}}</label><br>
			<div id="optional-buttons-div">
				{{#if hasUnamed}}
					<button id="show-more-clusters" type="button" class="primary">{{reviewPeopleMsg}}</button>
				{{/if}}
				{{#if hasHidden}}
					<button id="show-ignored-clusters" type="button" class="primary">{{reviewIgnoredMsg}}</button>
				{{/if}}
			</div>
			<div class="persons-previews">
				{{#each persons}}
					<div class="person-box" data-id="{{name}}">
						<div class="face-preview-big lozad" data-background-image="{{thumbUrl}}" width="128" height="128"></div>
						<p class="person-name">
							<span>{{name}}</span>
						</p>
						<p class="person-desc">{{noPhotos count}}</p>
					</div>
				{{/each}}
			</div>
		</div>

		<!-- ================== DIVIDER ================== -->
		<div style="
			width:2px;
			background:#e0e0e0;
			margin:0; /* no gap divider sits between panes */
			"></div>

		<!-- ================== RIGHT SIDE (dynamic table) ================== -->
		<div class="right-pane"
			style="
				flex:1; padding:16px;
				overflow-y:auto;
			">
			<table id="dynamic-table"
				border="0"
				cellpadding="8"
				cellspacing="0"
				width="100%"
				style="border-collapse:collapse;">
				<tbody>
					{{#each hidden}}
						<tr>
							<td>
								<div class="face-box" data-id="{{id}}" style="text-align: center">
									{{#each faces}}
										{{#if fileUrl}}
											<a href="{{fileUrl}}" target="_blank">
												<img class="face-preview-dialog" src="{{thumbUrl}}" width="50" height="50"/>
											</a>
										{{else}}
											<img class="face-preview-dialog" src="{{thumbUrl}}" width="50" height="50"/>
										{{/if}}
									{{/each}}
								</div>
							</td>
							<td>{{this.id}}</td>
						</tr>
					{{/each}}
				</tbody>
			</table>
		</div>
	</div>
{{else if personName}}
	<h2 style="display: flex;">
		<a class="title-icon icon-back"></a>
		<span class="title-name">{{personName}}</span>
		<a id="rename-person" title="{{renameHint}}" class="title-icon icon-rename" data-id="{{personName}}"></a>
		<a id="hide-person" title="{{hideHint}}" class="title-icon icon-disabled-user" data-id="{{personName}}"></a>
	</h2>
	<button id="review-person-clusters" type="button" class="primary">
		{{showMoreButton}}
	</button>
	<div id="optional-buttons-div"></div>
	<div class="persons-previews">
		{{#each personImages}}
			<div class="image-box">
				<div class="file-preview-big lozad" data-background-delimiter="\" data-background-image="{{{thumbUrl}}}" width="128" height="128" data-id="{{filename}}"></div>
			</div>
		{{/each}}
	</div>
{{else if persons}}
	<h2>
		{{appName}}
	</h2>
	<input id="enableFacerecognition" name="enableFacerecognition" type="checkbox" class="checkbox" value="1" {{#if enabled}}checked{{/if}}>
	<label for="enableFacerecognition">{{enableDescription}}</label><br>
	<div id="optional-buttons-div">
		{{#if hasUnamed}}
			<button id="show-more-clusters" type="button" class="primary">{{reviewPeopleMsg}}</button>
		{{/if}}
		{{#if hasHidden}}
			<button id="show-ignored-clusters" type="button" class="primary">{{reviewIgnoredMsg}}</button>
		{{/if}}
	</div>
	<div class="persons-previews">
		{{#each persons}}
			<div class="person-box" data-id="{{name}}">
				<div class="face-preview-big lozad" data-background-image="{{thumbUrl}}" width="128" height="128"></div>
				<p class="person-name">
					<span>{{name}}</span>
				</p>
				<p class="person-desc">{{noPhotos count}}</p>
			</div>
		{{/each}}
	</div>
{{else if loaded}}
	<h2>
		{{appName}}
	</h2>
	<input id="enableFacerecognition" name="enableFacerecognition" type="checkbox" class="checkbox" value="1" {{#if enabled}}checked{{/if}}>
	<label for="enableFacerecognition">{{enableDescription}}</label><br>
	<div id="optional-buttons-div">
		{{#if hasUnamed}}
			<button id="show-more-clusters" type="button" class="primary">{{reviewPeopleMsg}}</button>
		{{/if}}
		{{#if hasHidden}}
			<button id="show-ignored-clusters" type="button" class="primary">{{reviewIgnoredMsg}}</button>
		{{/if}}
	</div>
	<div class="emptycontent">
		<div class="icon-contacts-dark svg"></div>
		<h2>
			{{emptyMsg}}
		</h2>
		<p>
		{{emptyHint}}
		</p>
	</div>
{{else}}
	<h2>
		{{appName}}
	</h2>
	<div class="emptycontent">
		<div class="icon-contacts-dark svg"></div>
		<h2>
			{{loadingMsg}}
		</h2>
		<img class="loadingimport" src="{{loadingIcon}}"/>
	</div>
{{/if}}

</div>